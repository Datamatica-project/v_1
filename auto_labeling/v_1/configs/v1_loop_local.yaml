loop:
  # Runtime (Student 기준)
  device: "0"          # GPU 없으면 "cpu"
  imgsz: 640

  # PASS/FAIL
  conf_pass_threshold: 0.6
  allow_empty_boxes_pass: true

  pass_fail_policy:
    mode: "ratio"
    max_low_conf_ratio: 0.25
    drop_lowest_ratio: 0.20

  nms_conf_floor: 0.01
  max_det: 300

  # 라운드 제어 (시연: 짧게)
  max_rounds: 2

  # FAIL 샘플링 (시연: 줄여서 빠르게)
  fail_sampler:
    mode: "random"
    max_fail_per_round: 150

  # Teacher (시연: 사용)
  use_teacher: true
  teacher_conf_th: 0.25

  # Train set 구성 (시연: GT anchor 비중 낮춰서 변화를 더 잘 보이게)
  use_gt_anchor: true
  gt_anchor_ratio: 0.3

  # Micro-FT (시연: 에폭 줄여서 빠르게)
  round_epochs: 1
  round_lr: 5.0e-5
  round_batch: 4
  round_workers: 2
  freeze_backbone: true
  freeze_layers: 10

  enable_fail_ratio_stop: false
  min_fail_ratio: 0.01

  enable_fail_count_stop: true

  enable_metric_stop: false
  metric_name: "fail_ratio"
  min_improvement: 0.01
  patience_rounds: 1

export:
  export_root: "auto_labeling/v_1/data/final_export_local"
  export_conf: 0.3
  merge_pass: true
run:
  fail_dir: "auto_labeling/v_1/data/fail/images"
  student: "auto_labeling/v_1/models/user_yolo/weights/student_h10_init_latest.pt"
